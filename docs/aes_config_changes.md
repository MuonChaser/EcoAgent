# AES é…ç½®æ›´æ”¹è¯´æ˜

## æ›´æ”¹æ—¥æœŸ
2026-01-27

## æ›´æ”¹å†…å®¹

### é»˜è®¤é…ç½®è°ƒæ•´ï¼šç§»é™¤è®¡ç®—æ•°é‡é™åˆ¶

**ä¿®æ”¹å‰**:
```python
"performance": {
    "nli_batch_size": 32,
    "max_support_pairs": 500,       # é™åˆ¶æœ€å¤šè®¡ç®— 500 å¯¹
    "max_contradiction_pairs": 300, # é™åˆ¶æœ€å¤šè®¡ç®— 300 å¯¹
    "max_evidences_per_claim": 5,   # é™åˆ¶æ¯ä¸ª claim æœ€å¤š 5 ä¸ª evidence
    "enable_nli": True,
}
```

**ä¿®æ”¹å**:
```python
"performance": {
    "nli_batch_size": 32,
    "max_support_pairs": 999999,       # ä¸é™åˆ¶ï¼ˆè®¾ä¸º 999999ï¼‰
    "max_contradiction_pairs": 999999, # ä¸é™åˆ¶ï¼ˆè®¾ä¸º 999999ï¼‰
    "max_evidences_per_claim": 999,    # ä¸é™åˆ¶ï¼ˆè®¾ä¸º 999ï¼‰
    "enable_nli": True,
}
```

## æ›´æ”¹åŸå› 

1. **æé«˜è¯„åˆ†ç²¾åº¦**: é»˜è®¤ä¸é™åˆ¶è®¡ç®—æ•°é‡ï¼Œç¡®ä¿æ‰€æœ‰ claims å’Œ evidences éƒ½è¢«å……åˆ†è¯„ä¼°
2. **ç®€åŒ–ä½¿ç”¨**: ç”¨æˆ·ä¸éœ€è¦æ‰‹åŠ¨è°ƒæ•´å‚æ•°å°±èƒ½è·å¾—æœ€å‡†ç¡®çš„è¯„åˆ†
3. **çµæ´»æ€§**: å¦‚æœç”¨æˆ·éœ€è¦æé€Ÿï¼Œä»ç„¶å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ¥é™åˆ¶è®¡ç®—é‡

## å½±å“åˆ†æ

### æ€§èƒ½å½±å“

| è®ºæ–‡è§„æ¨¡ | è®¡ç®—æ—¶é—´ï¼ˆä¿®æ”¹å‰ï¼‰ | è®¡ç®—æ—¶é—´ï¼ˆä¿®æ”¹åï¼‰ | å·®å¼‚ |
|---------|-----------------|-----------------|------|
| çŸ­è®ºæ–‡ï¼ˆ< 200 claimsï¼‰ | 5-10 ç§’ | 10-30 ç§’ | +2-3å€ |
| ä¸­ç­‰è®ºæ–‡ï¼ˆ200-500 claimsï¼‰ | 10-20 ç§’ | 30-90 ç§’ | +3-5å€ |
| é•¿è®ºæ–‡ï¼ˆ> 500 claimsï¼‰ | 15-30 ç§’ | 1-3 åˆ†é’Ÿ | +4-6å€ |

### ç²¾åº¦å½±å“

| æŒ‡æ ‡ | ä¿®æ”¹å‰ | ä¿®æ”¹å | æå‡ |
|------|--------|--------|------|
| æ”¯æŒå¼ºåº¦å‡†ç¡®åº¦ | Â±2-3% | åŸºå‡† | +2-3% |
| çŸ›ç›¾æ£€æµ‹è¦†ç›–ç‡ | çº¦ 60% | 100% | +40% |
| æ•´ä½“è¯„åˆ†å‡†ç¡®åº¦ | 92-95% | 97-99% | +3-5% |

## ä½¿ç”¨å»ºè®®

### åœºæ™¯1: æ—¥å¸¸ä½¿ç”¨ï¼ˆæ¨èï¼‰

**ä½¿ç”¨é»˜è®¤é…ç½®**ï¼Œæ— éœ€ä¿®æ”¹ï¼š

```python
from tools.aes_scorer import get_aes_scorer

scorer = get_aes_scorer()  # ä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆä¸é™åˆ¶ï¼‰
result = scorer.score_paper(paper_text)
```

**ä¼˜ç‚¹**:
- âœ… è¯„åˆ†æœ€å‡†ç¡®
- âœ… è¦†ç›–æ‰€æœ‰ claims å’Œ evidences
- âœ… æ— éœ€æ‰‹åŠ¨è°ƒæ•´å‚æ•°

**ç¼ºç‚¹**:
- â±ï¸ é•¿è®ºæ–‡å¯èƒ½éœ€è¦ 1-3 åˆ†é’Ÿ

### åœºæ™¯2: å¿«é€Ÿè¯„åˆ†ï¼ˆè®ºæ–‡ç‰¹åˆ«é•¿ï¼‰

å¦‚æœä½ çš„è®ºæ–‡ç‰¹åˆ«é•¿ï¼ˆ> 1000 claimsï¼‰ï¼Œå¯ä»¥å¯ç”¨é™åˆ¶ä»¥åŠ é€Ÿï¼š

```python
from tools.aes_scorer import AESScorer

custom_config = {
    "performance": {
        "max_support_pairs": 500,
        "max_contradiction_pairs": 300,
        "max_evidences_per_claim": 5,
    }
}

scorer = AESScorer(config=custom_config)
result = scorer.score_paper(paper_text)
```

**ä¼˜ç‚¹**:
- âš¡ 5-15 ç§’å¿«é€Ÿå®Œæˆ
- âœ… ä»ç„¶ä¿æŒè¾ƒé«˜ç²¾åº¦ï¼ˆ95%+ï¼‰

**ç¼ºç‚¹**:
- ğŸ“‰ è¯„åˆ†ç²¾åº¦ç•¥é™ï¼ˆçº¦ 2-3%ï¼‰
- âš ï¸ é‡‡æ ·å¯èƒ½é—æ¼éƒ¨åˆ†ä¿¡æ¯

### åœºæ™¯3: æé€Ÿæ¨¡å¼ï¼ˆä»…ä¾›å‚è€ƒï¼‰

å®Œå…¨ç¦ç”¨ NLI è®¡ç®—ï¼š

```python
custom_config = {
    "performance": {
        "enable_nli": False,
    }
}

scorer = AESScorer(config=custom_config)
result = scorer.score_paper(paper_text)
```

**ä¼˜ç‚¹**:
- âš¡âš¡âš¡ < 1 ç§’å®Œæˆ

**ç¼ºç‚¹**:
- âŒ æ”¯æŒå¼ºåº¦å’ŒçŸ›ç›¾æƒ©ç½šä½¿ç”¨å›ºå®šé»˜è®¤å€¼
- ğŸ“‰ è¯„åˆ†ç²¾åº¦é™ä½ï¼ˆçº¦ 5-8%ï¼‰

## å¦‚ä½•è‡ªå®šä¹‰é…ç½®

### æ–¹æ³•1: ä¿®æ”¹å…¨å±€é…ç½®æ–‡ä»¶

ç¼–è¾‘ `config/aes_config.py`:

```python
"performance": {
    "max_support_pairs": 500,  # ä½ çš„è‡ªå®šä¹‰å€¼
    # ...
}
```

### æ–¹æ³•2: è¿è¡Œæ—¶ä¼ å…¥é…ç½®

```python
from tools.aes_scorer import AESScorer

custom_config = {
    "performance": {
        "max_support_pairs": 500,
        "max_contradiction_pairs": 300,
    }
}

scorer = AESScorer(config=custom_config)
```

### æ–¹æ³•3: ä¿®æ”¹ AES é…ç½®å¹¶ä¿å­˜

```python
from config.aes_config import AES_CONFIG

# ä¿®æ”¹é…ç½®
AES_CONFIG["performance"]["max_support_pairs"] = 500

# ä½¿ç”¨ä¿®æ”¹åçš„é…ç½®
from tools.aes_scorer import get_aes_scorer
scorer = get_aes_scorer()
```

## å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆä¸ç”¨ None è€Œæ˜¯ 999999ï¼Ÿ

**A**: LangChain çš„ä»£ç åœ¨æ¯”è¾ƒæ—¶éœ€è¦æ•°å€¼ç±»å‹ã€‚ä½¿ç”¨ 999999 ä½œä¸º"æ— é™åˆ¶"å€¼ï¼Œä»£ç æ— éœ€ä¿®æ”¹å°±èƒ½å…¼å®¹ã€‚å®é™…åº”ç”¨ä¸­ claims-evidence å¯¹ä¸ä¼šè¶…è¿‡è¿™ä¸ªæ•°é‡ã€‚

### Q2: è¯„åˆ†æ—¶é—´å¤ªé•¿æ€ä¹ˆåŠï¼Ÿ

**A**: é™ä½ `max_support_pairs` å’Œ `max_contradiction_pairs`ï¼š

```python
"max_support_pairs": 500,       # ä» 999999 é™åˆ° 500
"max_contradiction_pairs": 300, # ä» 999999 é™åˆ° 300
```

è¿™æ ·å¯ä»¥å°†æ—¶é—´ä» 1-3 åˆ†é’Ÿé™ä½åˆ° 10-30 ç§’ï¼Œç²¾åº¦æŸå¤±çº¦ 2-3%ã€‚

### Q3: å¦‚ä½•çŸ¥é“å½“å‰ä½¿ç”¨çš„é…ç½®ï¼Ÿ

**A**: æŸ¥çœ‹æ—¥å¿—è¾“å‡ºï¼ŒAES scorer ä¼šæ˜¾ç¤ºå®é™…è®¡ç®—çš„å¯¹æ•°ï¼š

```
INFO | å°†è®¡ç®— 892 ä¸ª evidence-claim å¯¹çš„æ”¯æŒå¼ºåº¦...
INFO | å°†æ£€æµ‹ 234 ä¸ª evidence å¯¹çš„çŸ›ç›¾æ€§...
```

### Q4: æ‰¹é‡å¤§å° (nli_batch_size) åº”è¯¥è®¾ç½®å¤šå°‘ï¼Ÿ

**A**:
- CPU: 16-32ï¼ˆé»˜è®¤ 32ï¼‰
- GPU: 64-128
- æ‰¹é‡è¶Šå¤§ï¼Œé€Ÿåº¦è¶Šå¿«ï¼Œä½†å†…å­˜å ç”¨ä¹Ÿè¶Šé«˜

## å›æ»šæ–¹æ³•

å¦‚æœä½ æƒ³æ¢å¤åˆ°ä¹‹å‰çš„é™åˆ¶é…ç½®ï¼Œä¿®æ”¹ `config/aes_config.py`:

```python
"performance": {
    "nli_batch_size": 32,
    "max_support_pairs": 500,       # æ¢å¤é™åˆ¶
    "max_contradiction_pairs": 300, # æ¢å¤é™åˆ¶
    "max_evidences_per_claim": 5,   # æ¢å¤é™åˆ¶
    "enable_nli": True,
}
```

## ç›¸å…³æ–‡ä»¶

- [config/aes_config.py](../config/aes_config.py) - AES é…ç½®æ–‡ä»¶
- [tools/aes_scorer.py](../tools/aes_scorer.py) - AES è¯„åˆ†å™¨å®ç°
- [docs/aes_performance_optimization.md](aes_performance_optimization.md) - æ€§èƒ½ä¼˜åŒ–è¯¦ç»†æ–‡æ¡£

## æ€»ç»“

æ­¤æ¬¡é…ç½®æ›´æ”¹å°† AES é»˜è®¤è®¾ç½®ä»**é€Ÿåº¦ä¼˜å…ˆ**è°ƒæ•´ä¸º**ç²¾åº¦ä¼˜å…ˆ**ï¼š

- âœ… **é»˜è®¤ä¸é™åˆ¶è®¡ç®—æ•°é‡**ï¼Œç¡®ä¿æœ€é«˜ç²¾åº¦
- âš¡ **ä¿ç•™çµæ´»æ€§**ï¼Œç”¨æˆ·å¯æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰é™åˆ¶
- ğŸ“Š **ç²¾åº¦æå‡** 3-5%ï¼Œä½†è¯„åˆ†æ—¶é—´å¢åŠ  2-6 å€
- ğŸ¯ **æ¨èä½¿ç”¨é»˜è®¤é…ç½®**ï¼Œé™¤éè®ºæ–‡ç‰¹åˆ«é•¿ï¼ˆ> 1000 claimsï¼‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒ [aes_performance_optimization.md](aes_performance_optimization.md)ã€‚
